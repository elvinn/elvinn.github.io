---
title: 学一次忘一次的正则表达式
tags:
  - python
date: 2016-11-17 22:43:34
---

说实话，正则表达式已经看过不下五遍了，然而每次要用的时候，都得再重新学一下才行——实在是记不住呀！！

今天趁着重新学Python的机会，总结一下正则表达式中基本的内容，更加深入、详细的内容可以移步[正则表达式30分钟入门](http://deerchao.net/tutorials/regex/regex.htm)。

<!--more-->

1.  它是什么？
   正则表达式是一种用来匹配字符串的强有力的武器，是记录文本规则的代码。
2. 常用元字符
   *   _._ 匹配除换行符以外的任意字符
   *   _\w_        匹配字母或数字的或下划线或汉字
   *   _\d_        匹配数字
   *   _\s_        匹配任意的空白符
   *   _\b_        匹配单词的开始或者结束
   *   _[xyz]_     匹配x, y, z中的一个
   *   _^_         匹配字符串的开始
   *   _$_         匹配字符串的结束

3. 常用限定符

   *   _*_        任意个字符（包括0个）
   *   _+_        至少一个字符
   *   _？_         0或1个字符
   *   _{n}_       n个字符
   *   _{n,}_      大于等于n个字符
   *   _{n,m}_     n-m个字符

4. 常用反义词

   *   _\W_        匹配任意不是字母，数字，下划线，汉字的字符
   *   _\D_        匹配任意非数字的字符
   *   _\S_        匹配任意不是空白符的字符
   *   _\B_        匹配不是单词开头或结束的位置
   *   _[^x]_      匹配除了x以外的任意字符

5. 简单地例子

   *   `00\d`可以匹配**‘007’**，但不能匹配**‘00A’**
   *   `\w\w\d`可以匹配**‘py3’**
   *   `\d{3}`可以匹配三个数字，如**‘010’**
   *   `\s+`可以匹配至少一个空白字符，如1个空格或3个空格
   *   `\d{3,8}`可以匹配3-8个数字，如**‘1234567’**
   *   `[0-9a-zA-Z\_]+`可以匹配至少由一个数字、字母或者下划线组成的字符串，如’a100’，’0_Z’，’Py3000’等等；

6. 正则表达式在 Python 中的运用

   ```python
   import re   # 引进包含正则表达式功能的模块
   # Example1
   # match()方法判断是否匹配,
   # 如果匹配成功，返回一个Match对象，
   # 否则返回None。
   test = 'www.google.com'
   if re.match(r'www.\w+.\w+', test):
       print('OK!')
   else:
       print('Failed!')
   # Example2   
   # 除了简单地判断是否匹配之外,
   # 正则表达式还有提取子串的强大功能,
   # 用()表示的就是要提取的分组。
   test = 'www.google.com'
   result = re.match(r'www.(\w+).(\w+)', test)
   if :
       print(result.group(0), result.group(1), result.group(2)
       print(result.groups())
   else:
       print('Failed!')
   # Example3
   # 正则匹配默认是贪婪匹配，
   # 也就是匹配尽可能多的字符,
   # 通过加'?'采用非贪婪匹配。
   print(re.match(r'^(\d+)(0*)$', '102300').groups())
   print(re.match(r'^(\d+?)(0*)$', '102300').groups())
   # Example4
   # 如果一个正则表达式要重复使用几千次，
   # 出于效率的考虑，
   # 我们可以预编译该正则表达式。
   re_url = re.compile(r'www.(\w+).(\w+)')
   print(re_url.match('www.google.com').groups())
   ```

程序运行结果如下：

```
OK!
('www.google.com', 'google', 'com')
('google', 'com')
('102300', '')
('1023', '00')
('google', 'com')
```

需要注意的几点：

*   正则表达式使用**re**前缀，这样可以不用考虑转义的问题
*   `re.match(r&#39;xxx&#39;, string).group(0)` 永远是原始字符串，也就是 string。